DELIMITER //

CREATE
    /*!50017 DEFINER = 'root'@'localhost' */
    TRIGGER 'cek_format' BEFORE INSERT ON 'inbox' 
    FOR EACH ROW BEGIN
    /*cek trigger jika benar */    
    IF LENGTH(new.'TextDecoded')>8 AND SUBSTR(new.'TextDecoded',1,4)='INFO' AND (SELECT COUNT('name') FROM 'data_user' WHERE 'name'= SUBSTR(new.'TextDecoded',6,15))>0 THEN 
       INSERT INTO 'outbox' ('DestinationNumber','TextDecoded','CreatorID') VALUES(new.'SenderNumber',CONCAT('NAMA :',(SELECT 'name' FROM 'data_user' WHERE 'name'= SUBSTR(new.'TextDecoded',6,15)),' HP: ',(SELECT 'handphone' FROM 'data_user' WHERE 'name'= SUBSTR(new.'TextDecoded',6,15))),'@Paijo Creator ID');

    ELSE 
        INSERT INTO 'outbox' ('DestinationNumber','TextDecoded','CreatorID') VALUES(new.'SenderNumber', CONCAT('"',new.'TextDecoded','" Format salah'),'@Paijo Creator ID'));
            /* Jika ingin menandai format salah dengan kata salah di pesan masuk */     
            /* SET new.'TextDecoded'=concat('SALAH ',new.'TextDecoded'); */
    END IF;     
END;//

DELIMITER ;